<html>
  <head>
    <title>Jack Lawrence Jones | Baritone</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
  </head>
  <body>
    <div class="container">
      <img class="headshot" src="jack_and_dog.jpg" alt="Jack Lawrence-Jones' head">
      <h1>Jack Lawrence-Jones | Baritone</h1>
      <ul class="navigation">
        <li><a href="./">home</a></li>
        <li><a href="./about">about</a></li>
        <li><a href="./diary">diary</a></li>
        <li class="current"><a href="./contact">contact</a></li>
      </ul>
      <h2>Contact</h2>
      <form id="contact-form" class="contact-form">
        <fieldset>
          <ul>
            <li>
              <input id="name" name="name" type="text" placeholder="Name" required="required" class="field-style field-split align-left">
              <input id="email" name="email" type="text" placeholder="Email" required="required" class="field-style field-split align-right">
            </li>
            <li>
              <textarea id="message" name="message" placeholder="Message" rows="3" required="required" class="field-style"></textarea>
            </li>
            <li>
              <input type="submit" value="Send Message" />
            </li>
          </ul>
        </fieldset>
      </form>
    </div>
    <script>
      window.addEventListener("load", function () {
        function sendData() {
          var XHR = new XMLHttpRequest();

          // Bind the FormData object and the form element
          var FD = new FormData(form);

          // Define what happens on successful data submission
          XHR.addEventListener("load", function(event) {
            alert("Thanks for your message - I'll be in touch!");
          });

          // Define what happens in case of error
          XHR.addEventListener("error", function(event) {
            alert("Message sending failed, sorry - I'm looking into it!");
          });

          // Set up our request
          XHR.open("POST", "/contact");

          // The data sent is what the user provided in the form
          XHR.send(FD);
        }

        // Access the form element...
        var form = document.getElementById("contact-form");

        // ...and take over its submit event.
        form.addEventListener("submit", function (event) {
          event.preventDefault();

          sendData();
        });
      });
    </script>
  </body>
</html>
